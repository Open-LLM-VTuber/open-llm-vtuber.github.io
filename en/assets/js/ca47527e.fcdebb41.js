"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7741],{4082:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"user-guide/backend/docker","title":"Docker Deployment","description":"Due to significant refactoring, the Docker image has not yet been updated to version v1.0.0, but it will be updated soon.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/user-guide/backend/docker.md","sourceDirName":"user-guide/backend","slug":"/user-guide/backend/docker","permalink":"/en/docs/user-guide/backend/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/Open-LLM-VTuber/Open-LLM-VTuber-Docs/tree/main/docs/user-guide/backend/docker.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"docSidebar","previous":{"title":"Translation","permalink":"/en/docs/user-guide/backend/translate"},"next":{"title":"\u524d\u7aef\u7528\u6237\u6307\u5357","permalink":"/en/docs/user-guide/frontend"}}');var o=i(4848),r=i(8453);const s={sidebar_position:8},l="Docker Deployment",d={},c=[{value:"Usage Notes",id:"usage-notes",level:2},{value:"Pre-installed Model Information",id:"pre-installed-model-information",level:2},{value:"Deployment Steps",id:"deployment-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"docker-deployment",children:"Docker Deployment"})}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsxs)(n.p,{children:["Due to significant refactoring, the Docker image has not yet been updated to version ",(0,o.jsx)(n.code,{children:"v1.0.0"}),", but it will be updated soon."]})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"\u26a0\ufe0f Please note: This feature is currently in an experimental stage but works normally in most cases."})}),"\n",(0,o.jsxs)(n.p,{children:["You can choose to build the Docker image yourself or pull the pre-built image directly from Docker Hub: ",(0,o.jsx)(n.a,{href:"https://hub.docker.com/r/t41372/open-llm-vtuber",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/badge/t41372%2FOpen--LLM--VTuber-%25230db7ed.svg?logo=docker&logoColor=blue&labelColor=white&color=blue",alt:""})})]}),"\n",(0,o.jsx)(n.h2,{id:"usage-notes",children:"Usage Notes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The Docker image is large (about 13GB), and some optional models require additional downloads when used, occupying more storage space"}),"\n",(0,o.jsx)(n.li,{children:"Only supports devices with NVIDIA GPUs"}),"\n",(0,o.jsxs)(n.li,{children:["Requires installation and configuration of ",(0,o.jsx)(n.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html",children:"NVIDIA Container Toolkit"})," to support GPU passthrough"]}),"\n",(0,o.jsx)(n.li,{children:"Current issue: Some models need to be re-downloaded after the container stops (this will be fixed in future versions)"}),"\n",(0,o.jsxs)(n.li,{children:["Building the image on ARM architecture devices is not recommended due to potential build failures with the gRPC dependency (",(0,o.jsx)(n.a,{href:"https://github.com/grpc/grpc/issues/34998",children:"related issue"}),")"]}),"\n",(0,o.jsx)(n.li,{children:"If running on a remote server, HTTPS must be configured. This is because the frontend webpage's microphone/camera/screen recording features can only be used in a secure context (localhost or HTTPS environment)"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"pre-installed-model-information",children:"Pre-installed Model Information"}),"\n",(0,o.jsx)(n.p,{children:"The default image comes with most Automatic Speech Recognition (ASR) and Text-to-Speech (TTS) models pre-installed. However, considering size factors (about 8GB, which would increase the total size to 25GB) and performance, the default build does not include the following models:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Bark TTS"}),"\n",(0,o.jsx)(n.li,{children:"Original OpenAI Whisper (Note: This refers to Whisper, not WhisperCPP)"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"To include these models in the image, add the following parameters when building:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"--build-arg INSTALL_ORIGINAL_WHISPER=true --build-arg INSTALL_BARK=true\n"})}),"\n",(0,o.jsx)(n.h2,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Before building the image, check and adjust the ",(0,o.jsx)(n.code,{children:"conf.yaml"})," configuration file (the current configuration will be built into the image)"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Build the Docker image:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker build -t open-llm-vtuber .\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"Note: The build process may take a considerable amount of time"}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Prepare the ",(0,o.jsx)(n.code,{children:"conf.yaml"})," configuration file\nYou can obtain it from the project repository or download it directly via this ",(0,o.jsx)(n.a,{href:"https://raw.githubusercontent.com/t41372/Open-LLM-VTuber/main/conf.yaml",children:"link"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run the container:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -it --net=host --rm -v $(pwd)/conf.yaml:/app/conf.yaml -p 12393:12393 open-llm-vtuber\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Note: Replace ",(0,o.jsx)(n.code,{children:"$(pwd)/conf.yaml"})," with the actual path to your configuration file"]}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsxs)(n.li,{children:["Access ",(0,o.jsx)(n.code,{children:"localhost:12393"})," for testing"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var t=i(6540);const o={},r=t.createContext(o);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);